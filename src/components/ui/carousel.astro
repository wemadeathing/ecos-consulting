---
// src/components/sections/CaseStudiesCarousel.astro
import Button from "@ui/Button.astro";
import { Image } from "astro:assets";

import environmentalImg from "@images/environmental-services.jpg";


// Sample case studies data
const caseStudies = [
  {
    title: "Environmental Compliance for Manufacturing Plant",
    description: "How we helped a manufacturing company achieve compliance with new environmental regulations while reducing waste by 40%.",
    image: "/case-studies/manufacturing-plant.jpg",
    category: "Environmental",
    href: "/case-studies/manufacturing-plant"
  },
  {
    title: "Construction Safety Management System",
    description: "Implementation of comprehensive safety protocols for a large-scale construction project, reducing incidents by 75%.",
    image: "/case-studies/construction-safety.jpg",
    category: "Safety",
    href: "/case-studies/construction-safety"
  },
  {
    title: "Commercial Property Environmental Assessment",
    description: "Thorough environmental assessment that uncovered and mitigated potential issues before property acquisition.",
    image: "/case-studies/property-assessment.jpg",
    category: "Compliance",
    href: "/case-studies/property-assessment"
  },
  {
    title: "Mining Operation Safety Audit",
    description: "Complete safety audit and implementation that brought operations into full compliance with industry regulations.",
    image: "/case-studies/mining-safety.jpg",
    category: "Safety",
    href: "/case-studies/mining-safety"
  }
];
---

<section class="py-16 sm:py-24 bg-primary-950">
  <div class="mx-auto max-w-[85rem] px-4 sm:px-6 lg:px-8">
    <div class="bg-tertiary-500 rounded-3xl p-8 sm:p-12 lg:p-16 flex flex-col md:flex-row items-center gap-8 md:gap-10">
      <div class="w-full md:w-1/2">
        <h2 class="text-balance text-3xl font-medium tracking-tight text-slate-900 sm:text-4xl">
          {caseStudies[0].title}
        </h2>
        <p class="mt-4 text-pretty text-lg text-slate-700">
          {caseStudies[0].description}
        </p>
        <div class="mt-8">
          <Button 
            href="/case-studies" 
            variant="secondary"
            size="lg"
          >
            View All Case Studies
          </Button>
        </div>
      </div>
      <div class="w-full md:w-1/2 overflow-hidden rounded-2xl">
        <Image 
          src={environmentalImg} 
          alt="Environmental Services" 
          class="w-full h-auto object-cover" 
          width={600}
          height={400}
        />
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('astro:page-load', () => {
    const carousel = document.querySelector('.snap-x');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');

    if (carousel && prevButton && nextButton) {
      const scrollAmount = 300; // Adjust this value to control the scroll distance

      prevButton.addEventListener('click', () => {
        carousel.scrollLeft -= scrollAmount;
      });

      nextButton.addEventListener('click', () => {
        carousel.scrollLeft += scrollAmount;
      });
    }
  });
</script>